<div class="scroll-dots" aria-label="Section navigation">
  <button class="dot active" data-target="sky" aria-label="About (hero)"></button>
  <button class="dot" data-target="plateau" aria-label="What I study"></button>
  <button class="dot" data-target="plants" aria-label="Projects"></button>
  <button class="dot" data-target="roots" aria-label="Why"></button>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const container = document.querySelector("#snap-root");
    const sections = document.querySelectorAll(".snap-section");
    const dots = document.querySelectorAll(".scroll-dots .dot");
    if (!container || sections.length === 0) return;

    // highlight current section dot
    const observer = new IntersectionObserver(
      (entries) => {
        for (const entry of entries) {
          if (!entry.isIntersecting) continue;
          const id = entry.target.id;

          dots.forEach((dot) => {
            dot.classList.toggle("active", dot.dataset.target === id);
          });
        }
      },
      { root: container, threshold: 0.6 }
    );

    sections.forEach((s) => observer.observe(s));

    // click = scroll the snap container (NOT the document)
    dots.forEach((dot) => {
      dot.addEventListener("click", () => {
        const targetId = dot.dataset.target;
        const section = document.getElementById(targetId);
        if (!section) return;

        // offsetTop is relative to the nearest offset parent; for our layout this works.
        // We scroll the container directly to avoid scrollIntoView affecting the page.
        container.scrollTo({
          top: section.offsetTop,
          behavior: "smooth",
        });
      });
    });
  });
</script>

<style>
.scroll-dots {
  position: fixed;
  right: 1.5rem;
  top: calc(var(--nav-h) + 50%);
  transform: translateY(-50%);
  z-index: 2000;

  display: flex;
  flex-direction: column;
  gap: 1.1rem;
}

.dot {
  width: 11px;
  height: 11px;
  border-radius: 999px;

  border: 2px solid rgba(0, 0, 0, 0.35);
  background: rgba(255, 255, 255, 0.55);
  cursor: pointer;

  transition: background 0.18s ease, transform 0.18s ease, border-color 0.18s ease;
}

.dot.active {
  background: #5d3c28;
  border-color: #5d3c28;
  transform: scale(1.3);
}
</style>
